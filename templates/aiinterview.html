{% extends 'base.html' %}
{% block body %}
<style>
    .con {
        margin: 0;
        font-family: Arial, sans-serif;
        display: flex;
        align-items: center;
        justify-content: center;
        height: 100vh;
        background-color: #1c1c1c; /* Dark gray background */
        color: #ffffff; /* White text color */
    }

    .con {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        gap: 20px;
    }

    video {
        width: 70%;
        max-width: 640px;
        border: 4px solid rgba(255, 255, 255, 0.3); /* Semi-transparent border */
        border-radius: 15px;
        transition: transform 0.3s, border-color 0.3s; /* Smooth transition for hover effects */
    }

    video:hover {
        transform: scale(1.05); /* Slight zoom on hover */
        border-color: rgba(255, 255, 255, 0.5); /* Change border color on hover */
    }

    .buttons {
        display: flex;
        justify-content: center;
        gap: 20px;
        width: 100%;
        max-width: 600px;
    }

    button {
        padding: 12px 25px;
        border: none;
        border-radius: 25px;
        background: linear-gradient(145deg, #2e2e2e, #3c3c3c); /* Gradient background */
        color: #ffffff;
        font-size: 16px;
        cursor: pointer;
        transition: background 0.3s, transform 0.2s;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2); /* Subtle shadow for a raised button effect */
    }

    button:hover {
        background: linear-gradient(145deg, #3c3c3c, #4d4d4d); /* Darker gradient on hover */
        transform: translateY(-3px); /* Lift button on hover */
    }

    button:active {
        transform: translateY(1px); /* Slight press down on click */
    }

    #openCamera {
        background: linear-gradient(145deg, #1e90ff, #007bff); /* Blue gradient */
    }

    #closeCamera {
        background: linear-gradient(145deg, #f39c12, #e67e22); /* Orange gradient */
    }

    #backButton {
        background: linear-gradient(145deg, #e74c3c, #c0392b); /* Red gradient */
    }

    #openCamera:hover {
        background: linear-gradient(145deg, #007bff, #0056b3); /* Darker blue on hover */
    }

    #closeCamera:hover {
        background: linear-gradient(145deg, #e67e22, #d35400); /* Darker orange on hover */
    }

    #backButton:hover {
        background: linear-gradient(145deg, #c0392b, #96281b); /* Darker red on hover */
    }
</style>

<div class="con">
<video id="webcam" autoplay></video>

<div class="buttons">
    <button id="openCamera">Open Camera</button>
    <button id="closeCamera">Close Camera</button>
    <button id="backButton">Back</button>
</div>
</div>

<script>
// Getting elements
const video = document.getElementById('webcam');
const openCameraBtn = document.getElementById('openCamera');
const closeCameraBtn = document.getElementById('closeCamera');
const backButton = document.getElementById('backButton');
let stream;

// Function to start the webcam
async function startCamera() {
    try {
        stream = await navigator.mediaDevices.getUserMedia({ video: true });
        video.srcObject = stream;
    } catch (err) {
        console.error("Error accessing webcam: ", err);
    }
}

// Function to close the camera
function closeCamera() {
    if (stream) {
        const tracks = stream.getTracks();
        tracks.forEach(track => track.stop()); // Stops the video stream
        video.srcObject = null;
    }
}

// Event listeners for buttons
openCameraBtn.addEventListener('click', startCamera); // Opens the camera
closeCameraBtn.addEventListener('click', closeCamera); // Closes the camera
backButton.addEventListener('click', () => {
    window.history.back(); // Go back to the previous page
});

// Start camera on page load
startCamera();
</script>

{% endblock %}